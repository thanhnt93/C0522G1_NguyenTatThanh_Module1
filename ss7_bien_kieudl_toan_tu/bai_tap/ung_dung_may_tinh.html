<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Máy tính</title>
    <style>
        #basicCaculator{
            width:400px;
            height:300px;
            background-color: #eaedef;
            margin:0 auto;
            border-radius: 5px;
            border: 1px solid black;
        }

        body{
            background-color: #90a094;
        }
        #computer{
            width:320px;
            height:520px;
            background-color: #eaedef;
            margin:0 auto;
            border-radius: 5px;
        }

        #result{
            height: 120px;
        }
        #oldResults{
            text-align: right;
            height:20px;
            margin:0 20px;
            padding-top:20px;
            font-size:15px;
            color:#919191;
        }
        #outputResult {
            text-align: right;
            height:60px;
            margin: 10px 20px;
            font-size: 30px;
        }
        #keyboard{
            height: 400px;
        }
        .system, .numbers, .blank {
            width:50px;
            height:50px;
            margin: 15px;
            float:left;
            border-radius: 50%;
            border-width: 0;
            font-weight:bold;
            font-size:16px;
        }
        .numbers, .blank{
            background-color: #eaedef;
        }
        .system, .numbers{
            curvaluer: pointer;
        }
        .system:active, .numbers:active {
            font-size: 13px;
        }
        .system:focus, .numbers:focus, .blank:focus{
            outline: 0;
        }
        button:nth-child(4) {
            font-size: 20px;
            background-color: #20b2aa;
        }
        button:nth-child(8) {
            font-size: 20px;
            background-color: #ffa500;
        }
        button:nth-child(12) {
            font-size: 20px;
            background-color: #f08080;
        }
        button:nth-child(16) {
            font-size: 20px;
            background-color: #7d93e0;
        }
        button:nth-child(20) {
            font-size: 20px;
            background-color: #9477af;
        }
    </style>
</head>
<body>
<div id="basicCaculator">
    <h2 style="text-align: center">Basic Caculator</h2>
    <input style="margin-left: 20px" type="number" id="numberA">
    <input type="number" id="numberB"> <br><br>
    <input style="margin-left: 18px" type="button" onclick="addition()" value="Addition(+)">
    <input type="button" onclick="subtraction()" value="Subtraction(-)">
    <input type="button" onclick="multiplication()" value="Multiplication(X)">
    <input type="button" onclick="division()" value="Division(/)">
    <p style="margin-left: 20px" id="resurt"></p>
</div>

<h2 style="text-align: center">Advanced Calculator</h2>
<div id="computer">
    <div id="result">
        <div id="oldResults">
            <p id="oldValue"></p>
        </div>
        <div id="outputResult">
            <p id="exportValue"></p>
        </div>
    </div>
    <div id="keyboard">
        <button class="system" id="deleteAll">C</button>
        <button class="system" id="deleteEachNumber">CE</button>
        <button class="system" id="%">%</button>
        <button class="system" id="/">÷</button>
        <button class="numbers" id="7">7</button>
        <button class="numbers" id="8">8</button>
        <button class="numbers" id="9">9</button>
        <button class="system" id="*">×</button>
        <button class="numbers" id="4">4</button>
        <button class="numbers" id="5">5</button>
        <button class="numbers" id="6">6</button>
        <button class="system" id="-">-</button>
        <button class="numbers" id="1">1</button>
        <button class="numbers" id="2">2</button>
        <button class="numbers" id="3">3</button>
        <button class="system" id="+">+</button>
        <button class="blank"></button>
        <button class="numbers" id="0">0</button>
        <button class="blank"></button>
        <button class="system" id="=">=</button>
    </div>
</div>
<script>
    //cộng
    function addition() {
        let numberA = document.getElementById('numberA').value;
        let numberB = document.getElementById('numberB').value;
        let addition = parseInt(numberA) + parseInt(numberB);
        document.getElementById('resurt').innerText = 'Kết quả = ' + addition;
        //trừ
    }  function subtraction() {
        let numberA = document.getElementById('numberA').value;
        let numberB = document.getElementById('numberB').value;
        let subtraction = parseInt(numberA) - parseInt(numberB);
        document.getElementById('resurt').innerText = 'Kết quả = ' + subtraction;
        //nhân
    }  function multiplication() {
        let numberA = document.getElementById('numberA').value;
        let numberB = document.getElementById('numberB').value;
        let multiplication = parseInt(numberA) * parseInt(numberB);
        document.getElementById('resurt').innerText = 'Kết quả = ' + multiplication;
    }
    //chia
    function division() {
        let numberA = document.getElementById('numberA').value;
        let numberB = document.getElementById('numberB').value;
        let division = parseInt(numberA) / parseInt(numberB);
        document.getElementById('resurt').innerText = 'Kết quả = ' + division ;
    }

    //lấy giá trị cũ
    function getOldValue(){
        return document.getElementById("oldValue").innerText;
    }

    //in giá trị cũ
    function printOldValue(value) {
        document.getElementById("oldValue").innerText = value;
    }

    // lấy kết quả
    function getResults() {
        return document.getElementById("exportValue").innerText;
    }

    //in kết quả
    function printResults(value) {
        document.getElementById("exportValue").innerText = value;
    }

    //định dạng chuỗi
    function stringFormat(value) {
        var n = Number(value);
        var value = n.toLocaleString("en");
        return value;
    }
    function removeStringFormatting(value) {
        return Number(value.replace(/,/g, ''))
    }
    var numbers = document.getElementsByClassName('numbers');
    for(var i=0; i<numbers.length; i++) {
        numbers[i].addEventListener('click', function() {
            var result = removeStringFormatting(getResults())
            if(result != NaN) {
                result = result + this.id;
                printResults(result)
            }
        })
    }
    function printResults(value) {
        if(value=="") {
            document.getElementById("exportValue").innerText = value;
        } else {
            document.getElementById("exportValue").innerText = stringFormat(value);
        }
    }

    var system = document.getElementsByClassName('system');
    for(var i=0; i < system.length; i++) {
        system[i].addEventListener('click', function() {
            if(this.id == "deleteAll") {
                printResults("");
                printOldValue("");
            }
            else if(this.id == "deleteEachNumber") {
                let result = removeStringFormatting(getResults()).toString();		//Xóa định dạng chuỗi
                if(result) {
                    result = result.substr(0, result.length -1)
                    printResults(result)
                }
            }
            else {
                var result = getResults();
                var oldResults = getOldValue();
                if(result != "" ) {
                    result = removeStringFormatting(result);
                    oldResults = oldResults + result;
                    if(this.id == "=") {
                        var oldResultvalue = eval(oldResults);
                        printResults(oldResultvalue)
                        printOldValue("")
                    } else {
                        oldResults = oldResults + this.id;
                        printOldValue(oldResults)
                        printResults("")
                    }
                }
            }
        })
    }

</script>
</body>
</html>